@model Dal.Dragones.Usuario
@using System.Security.Claims

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/localization/messages_es.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>
</head>
<head>
    <style>
        .nav-item a {
            text-decoration: none; /* Quitar subrayado */
            color: inherit; /* Heredar el color del texto */
            display: inline-block; /* Hacerlo un bloque en línea para aplicar padding correctamente */
            cursor: pointer; /* Cambiar el cursor a puntero */
            font-size: 27px;
        }
    </style>
</head>
<body>
    <div class="content-page-container full-reset custom-scroll-containers">
        <nav class="navbar-user-top full-reset">
            <ul class="list-unstyled full-reset">
                <figure>
                    <img src="~/assets/img/user01.png" alt="user-picture" class="img-responsive img-circle center-box">
                </figure>
                <li class="user-info" style="color:#fff; cursor:default;">
                    @if (User.Identity.IsAuthenticated)
                    {
                    <li class="user-info">
                        <div class="user-details">
                            <span data-placement="bottom" title="Usuario">Bienvenido, @User.FindFirst(ClaimTypes.Role)?.Value @User.Identity.Name</span>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="" asp-area="" asp-controller="Login" asp-action="Salir">
                            <i class="zmdi zmdi-power"></i>
                        </a>
                    </li>
                    }
                </li>
                <li class="tooltips-general btn-help" data-placement="bottom" title="Ayuda">
                    <i class="zmdi zmdi-help-outline zmdi-hc-fw"></i>
                </li>
                <li class="mobile-menu-button visible-xs" style="float: left !important;">
                    <i class="zmdi zmdi-menu"></i>
                </li>
                <li class="desktop-menu-button hidden-xs" style="float: left !important;">
                    <i class="zmdi zmdi-swap"></i>
                </li>
            </ul>
        </nav>
        <div class="container">
            <div class="page-header">
                <h1 class="all-tittles">Sistema Restaurante Los Dragones Inicio <small>Administración Usuarios</small></h1>
            </div>
        </div>
        <div class="container-fluid">
            <ul class="nav nav-tabs nav-justified" style="font-size: 17px;">
                <li class="active"><a asp-controller="Administracion" asp-action="CrearAdministrador">Administradores</a></li>
                <li><a asp-controller="Administracion" asp-action="CrearEmpleado">Empleados</a></li>
            </ul>
        </div>
        <div class="container-fluid" style="margin: 50px 0;">
            <div class="row">
                <div class="col-xs-12 col-sm-4 col-md-3">
                    <img src="~/assets/img/user01.png" alt="user" class="img-responsive center-box" style="max-width: 110px;">
                </div>
                <div class="col-xs-12 col-sm-8 col-md-8 text-justify lead">
                    Bienvenido a la sección para registrar nuevos administradores del sistema, debes de llenar todos los campos del siguiente formulario para registrar un administrador
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-xs-12 lead">
                    <ol class="breadcrumb">
                        <li class="active">Nuevo administrador</li>
                        <li><a asp-controller="Administracion" asp-action="AdministradorListado">Listado de administradores</a></li>
                    </ol>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="container-flat-form">
                <div class="title-flat-form title-flat-blue">Registrar un nuevo administrador</div>
                <form asp-controller="Usuario" asp-action="Create" method="post" class="form-padding">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div class="row">
                        <div class="col-xs-12">
                            <legend><i class="zmdi zmdi-account-box"></i> &nbsp; Datos básicos</legend><br>
                        </div>
                        <div class="col-xs-12 col-sm-6">
                            <div class="group-material">
                                <input asp-for="Nombre" class="material-control tooltips-general" placeholder="Nombre completo" data-toggle="tooltip" data-placement="top" title="Escribe el nombre del administrador" />
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <span asp-validation-for="Nombre" class="text-danger"></span>
                                <label asp-for="Nombre" class="control-label"></label>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6">
                            <div class="group-material">
                                <input asp-for="Correo" class="material-control tooltips-general" placeholder="E-mail" data-toggle="tooltip" data-placement="top" title="Escribe el Email del administrador">
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <span asp-validation-for="Correo" class="text-danger"></span>
                                <label asp-for="Correo" class="control-label"></label>
                            </div>
                        </div>
                        <div class="col-xs-12">
                            <legend><i class="zmdi zmdi-lock"></i> &nbsp; Datos de la cuenta</legend><br>
                        </div>
                        <div class="col-xs-12">
                            <label asp-for="RolID" class="control-label"></label>
                            <div class="group-material">
                                <select asp-for="RolID" class="form-control" asp-items="ViewBag.RolID"></select>
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6">
                            <div class="group-material">
                                <input asp-for="Clave" id="Clave" class="material-control tooltips-general" placeholder="Contraseña" data-toggle="tooltip" data-placement="top" title="Escribe una contraseña">
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <span asp-validation-for="Clave" id="passwordErrors" class="text-danger" style="white-space: pre-line;"></span>
                                <label>Contraseña</label>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6">
                            <div class="group-material">
                                <input asp-for="ConfirmarClave" class="material-control tooltips-general" placeholder="Repite la contraseña" data-toggle="tooltip" data-placement="top" title="Repite la contraseña">
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <span asp-validation-for="ConfirmarClave" class="text-danger"></span>
                                <label asp-for="ConfirmarClave" class="form-label">Confirmar Contraseña</label>
                            </div>
                        </div>
                        <div class="col-xs-12">
                            <p class="text-center">
                                <button type="reset" class="btn btn-info" style="margin-right: 20px;"><i class="zmdi zmdi-roller"></i> &nbsp;&nbsp; Limpiar</button>
                                <button type="submit" value="Save" class="btn btn-primary"><i class="zmdi zmdi-floppy"></i> &nbsp;&nbsp; Guardar</button>
                            </p>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="modal fade" tabindex="-1" role="dialog" id="ModalHelp">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title text-center all-tittles">ayuda del sistema</h4>
                    </div>
                    <div class="modal-body">
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Inventore dignissimos qui molestias ipsum officiis unde aliquid consequatur, accusamus delectus asperiores sunt. Quibusdam veniam ipsa accusamus error. Animi mollitia corporis iusto.
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal"><i class="zmdi zmdi-thumb-up"></i> &nbsp; De acuerdo</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        const passwordInput = document.getElementById('Clave');
        const passwordErrors = document.getElementById('passwordErrors');

        passwordInput.addEventListener('keyup', debounce(validatePassword, 300));
        passwordInput.addEventListener('blur', validatePassword); // Agregamos el evento blur

        function validatePassword() {
            const password = passwordInput.value;
            const errors = [];

            // Verificar que la contraseña tenga al menos 8 caracteres
            if (password.length < 8) {
                errors.push("La contraseña debe tener al menos 8 caracteres.");
            }

            // Verificar que la contraseña contenga al menos una mayúscula, una minúscula, un número y un signo
            if (!/[A-Z]/.test(password)) {
                errors.push("La contraseña debe contener al menos una letra mayúscula.");
            }

            if (!/[a-z]/.test(password)) {
                errors.push("La contraseña debe contener al menos una letra minúscula.");
            }

            if (!/[0-9]/.test(password)) {
                errors.push("La contraseña debe contener al menos un número.");
            }

            if (!/[\W_]/.test(password)) {
                errors.push("La contraseña debe contener al menos un signo especial.");
            }

            // Mostrar errores o mensaje de éxito
            if (errors.length > 0) {
                passwordErrors.innerHTML = errors.join('<br>');
                passwordErrors.classList.add('text-danger');
                passwordErrors.classList.remove('text-success');
            } else {
                passwordErrors.innerHTML = "La contraseña cumple con todos los requisitos.";
                passwordErrors.classList.add('text-success');
                passwordErrors.classList.remove('text-danger');
            }
        }

        function debounce(func, wait) {
            let timeout;
            return function (...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        }
    });


</script>